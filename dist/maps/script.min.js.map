{"version":3,"sources":["main.js","common/accordion.js","common/common-init.js","common/form-manager.js","common/scrolling.js","pages/home.js"],"names":["app","common","pages","init","pageId","$","attr","pageInstance","commonInit","Accordion","_class","animationTime","_classCallCheck","this","openedFrame","undefined","lastClosedFrameParentId","_createClass","key","value","setEvents","on","accordionAnnimation","bind","e","off","parentId","target","parent","closeAccordion","openAccordion","setTimeout","askedFrame","concat","autoHeight","css","height","animate","scrolling","setSmoothScrolling","FormManager","_class2","FormData","errorMessages","formId","url","formData","regex","name","phone","mail","minNameLenth","getFormData","sendData","_this","serializeArray","Q4","forEach","x","push","_this2","errorChecker","each","i","length","setError","test","messageIndex","type","_this3","html","checkInputData","targetValue","val","console","log","unsetError","fd","append","options","method","body","fetch","document","querySelectorAll","anchor","addEventListener","preventDefault","querySelector","getAttribute","scrollIntoView","behavior","scrollTo","elId","time","delay","documentElement","scrollTop","offset","top","Home","_class3","Q1","Q2","Q3","LastName","FirstName","Phone","Mail","Acceptation","accordion","formManager","t","formValidator"],"mappings":"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","file":"../script.min.js","sourcesContent":["'use strict';\r\n\r\nconst app = app || {\r\n  common: {},\r\n  pages: {}\r\n};\r\n\r\n$(init);\r\n\r\nfunction init() {\r\n  const pageId = $('body').attr('id');\r\n  const pageInstance = new app.pages[pageId]();\r\n\r\n  app.common.commonInit();\r\n  pageInstance.init();\r\n}","'use strict';\r\n\r\napp.common.Accordion = class {\r\n  constructor(animationTime) {\r\n    this.animationTime = animationTime;\r\n    this.openedFrame = undefined;\r\n    this.lastClosedFrameParentId = undefined;\r\n  }\r\n\r\n  init() {\r\n    this.setEvents();\r\n  }\r\n  setEvents() {\r\n    $('.ac-q').on('click', this.accordionAnnimation.bind(this));\r\n  }\r\n  accordionAnnimation(e) {\r\n    $('.ac-q').off('click');\r\n\r\n    const parentId = $(e.target).parent().attr('id');\r\n\r\n    if (this.openedFrame) { this.closeAccordion(); }\r\n\r\n    if (parentId != this.lastClosedFrameParentId) {\r\n      this.openAccordion(e, parentId);\r\n      //app.common.scrolling.scrollTo(parentId, 200, this.animationTime);\r\n    }\r\n    this.lastClosedFrameParentId = undefined;\r\n\r\n    setTimeout(this.setEvents.bind(this), this.animationTime);\r\n  }\r\n  openAccordion(e, parentId) {\r\n    const askedFrame = $(`#${parentId} > .ac-a`);\r\n    const autoHeight = $(`#${parentId} > .ac-a`).css('height', 'auto').height();\r\n    askedFrame.css('height', '0');\r\n    askedFrame.animate({\r\n      height: autoHeight\r\n    }, this.animationTime);\r\n    this.openedFrame = askedFrame;\r\n  }\r\n  closeAccordion() {\r\n    this.openedFrame.animate({\r\n      height: 0\r\n    }, this.animationTime);\r\n    this.lastClosedFrameParentId = this.openedFrame.parent().attr('id');;\r\n    this.openedFrame = undefined;\r\n  }\r\n}","app.common.commonInit = () => {\r\n  app.common.scrolling.setSmoothScrolling();\r\n}","'use strict';\r\n\r\napp.common.FormManager = class {\r\n  constructor(FormData, errorMessages, formId, url) {\r\n    this.formData = FormData;\r\n    this.errorMessages = errorMessages;\r\n    this.formId = formId;\r\n    this.url = url;\r\n\r\n    this.regex = {\r\n      name: /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,\r\n      // Support wide range of phone number format\r\n      phone: /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/,\r\n      mail: /^([a-z0-9\\+_\\-]+)(\\.[a-z0-9\\+_\\-]+)*@([a-z0-9\\-]+\\.)+[a-z]{2,6}$/\r\n    };\r\n    this.minNameLenth = 3;\r\n  }\r\n\r\n  formValidator() {\r\n    this.getFormData();\r\n\r\n    // const hasError = this.checkFormData();\r\n    // if (!hasError) {\r\n    //  $(this.formId).submit();\r\n    // }\r\n    //$(this.formId).submit();\r\n    this.sendData();\r\n  }\r\n  getFormData() {\r\n    const formData = $('#HomeForm').serializeArray();\r\n\r\n    // reset Q4 array\r\n    this.formData.Q4 = [];\r\n\r\n    formData.forEach(x => {\r\n      if (x.name === 'Q4') { this.formData[x.name].push(x.value); }\r\n      else { this.formData[x.name] = x.value; }\r\n    });\r\n  }\r\n  checkFormData() {\r\n    let errorChecker = false;\r\n\r\n    $.each(this.formData, (i, x) => {\r\n\r\n      // if no value set\r\n      if (x === \"\" || x.length === 0) {\r\n        errorChecker = true;\r\n\r\n        // if checkbox\r\n        if (i === 'Q1' || i === 'Q2' || i === 'Q3' || i === 'Q4' || i === 'Acceptation') {\r\n          this.setError(i, 'click');\r\n        } else {\r\n          this.setError(i, 'keyup');\r\n        }\r\n      } else {\r\n\r\n        // if name type\r\n        if (i === 'LastName' || i === 'FirstName') {\r\n          const test = this.regex.name.test(this.formData[i]);\r\n          // if don't match name regex or name too short\r\n          if (!test || this.formData[i].length < this.minNameLenth) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n        // if phone type\r\n        if (i === 'Phone') {\r\n          const test = this.regex.phone.test(this.formData[i]);\r\n          // if don't match phone regex\r\n          if (!test) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n        // if mail type\r\n        if (i === 'Mail') {\r\n          const test = this.regex.mail.test(this.formData[i]);\r\n          // if don't match mail regex\r\n          if (!test) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    return errorChecker;\r\n  }\r\n\r\n  setError(messageIndex, type) {\r\n    // write message\r\n    $(`#${messageIndex}Container .error-message`).html(this.errorMessages[messageIndex]);\r\n    // set event to remove it\r\n    $(`input[name=${messageIndex}]`).on(type, e => {\r\n      this.checkInputData(e, messageIndex);\r\n    });\r\n  }\r\n\r\n  unsetError(messageIndex, type) {\r\n    // write empty message\r\n    $(`#${messageIndex}Container .error-message`).html('');\r\n    // unset event\r\n    $(`input[name=${messageIndex}]`).off(type);\r\n  }\r\n\r\n  checkInputData(e, messageIndex) {\r\n    const targetValue = $(e.target).val();\r\n    console.log('------------------')\r\n    console.log(targetValue)\r\n    // if txt box message\r\n    if (e.type === 'keyup') {\r\n\r\n      // if name type message\r\n      if (messageIndex === 'LastName' || messageIndex === 'FirstName') {\r\n        const test = this.regex.name.test(targetValue);\r\n        // if match name regex and require length\r\n        if (test && targetValue.length >= this.minNameLenth) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n      // if phone type message\r\n      if (messageIndex === 'Phone') {\r\n        const test = this.regex.phone.test(targetValue);\r\n        // if match phone regex\r\n        if (test) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n      // if mail type message\r\n      if (messageIndex === 'Mail') {\r\n        const test = this.regex.mail.test(targetValue);\r\n        // if match mail regex\r\n        if (test) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n    } else {\r\n      this.unsetError(messageIndex, 'click');\r\n    }\r\n  }\r\n\r\n  sendData() {\r\n    console.log('send it')\r\n    const fd = new FormData();\r\n\r\n    $.each(this.formData, (i, x) => {\r\n      fd.append(i, x);\r\n    });\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      body: fd\r\n    }\r\n    const sendRes = fetch(this.url, options);\r\n  }\r\n\r\n}","'use strict';\r\n\r\napp.common.scrolling = {\r\n  // -----------------------------------------\r\n  setSmoothScrolling() {\r\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        document.querySelector(this.getAttribute('href')).scrollIntoView({\r\n          behavior: 'smooth'\r\n        });\r\n      });\r\n    });\r\n  },\r\n  // -----------------------------------------\r\n  scrollTo(elId, time, delay) {\r\n    setTimeout(() => {\r\n      $([document.documentElement, document.body]).animate({\r\n        scrollTop: $(`#${elId}`).offset().top\r\n      }, time);\r\n    }, delay);\r\n\r\n  }\r\n}","'use strict';\r\n\r\napp.pages.Home = class {\r\n  constructor() {\r\n    this.formData = {\r\n      Q1: '',\r\n      Q2: '',\r\n      Q3: '',\r\n      Q4: [],\r\n      LastName: '',\r\n      FirstName: '',\r\n      Phone: '',\r\n      Mail: '',\r\n      Acceptation: ''\r\n    };\r\n    this.errorMessages = {\r\n      Q1: 'Faites un choix',\r\n      Q2: 'Faites un choix',\r\n      Q3: 'Faites un choix',\r\n      Q4: 'Faites un choix',\r\n      LastName: 'Vous devez indiquer votre nom',\r\n      FirstName: 'Vous devez indiquer votre prénom',\r\n      Phone: 'Vous devez indiquer votre numéro de téléphone',\r\n      Mail: 'Vous devez indiquer votre adresse mail',\r\n      Acceptation: 'Acceptez les conditions générales d\\'utilisation'\r\n    };\r\n    this.url = 'assets/phpParts/pages/home/home-form-request.php';\r\n  }\r\n  init() {\r\n    this.accordion = new app.common.Accordion(500);\r\n    this.formManager = new app.common.FormManager(this.formData, this.errorMessages, '#HomeForm', this.url);\r\n\r\n    this.accordion.init();\r\n    this.setEvents();\r\n  }\r\n\r\n  setEvents() {\r\n    const t = this;\r\n\r\n    $('#HomeSubmit').on('click', e => {\r\n      e.preventDefault();\r\n      t.formManager.formValidator();\r\n    });\r\n  }\r\n\r\n}"]}