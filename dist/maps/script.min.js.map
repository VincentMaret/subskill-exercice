{"version":3,"sources":["main.js","common/accordion.js","common/common-init.js","common/form-manager.js","common/scrolling.js","pages/home.js"],"names":["app","common","pages","init","pageId","$","attr","pageInstance","commonInit","Accordion","_class","animationTime","_classCallCheck","this","openedFrame","undefined","lastClosedFrameParentId","_createClass","key","value","setEvents","on","accordionAnnimation","bind","window","refreshOpenedFrame","e","off","parentId","target","parent","closeAccordion","openAccordion","setTimeout","askedFrame","concat","autoHeight","css","height","animate","scrolling","setSmoothScrolling","FormManager","_class2","formData","formId","url","callback","regex","name","phone","mail","minNameLenth","getFormData","checkFormData","sendData","_this","serializeArray","t","each","i","x","_typeof","val","forEach","push","_this2","errorChecker","length","type","setError","test","accordion","messageIndex","targetValue","unsetError","_this3","html","errorMsg","checkInputData","fd","FormData","append","options","method","body","fetch","then","res","text","data","console","log","document","querySelectorAll","anchor","addEventListener","preventDefault","querySelector","getAttribute","scrollIntoView","behavior","scrollTo","elId","time","delay","documentElement","scrollTop","offset","top","Home","_class3","Q1","Q2","Q3","Q4","LastName","FirstName","Phone","Mail","Acceptation","formManager","mailCallback","formValidator"],"mappings":"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","file":"../script.min.js","sourcesContent":["'use strict';\r\n\r\nconst app = app || {\r\n  common: {},\r\n  pages: {}\r\n};\r\n\r\n$(init);\r\n\r\nfunction init() {\r\n  const pageId = $('body').attr('id');\r\n  app.pageInstance = new app.pages[pageId]();\r\n\r\n  app.common.commonInit();\r\n  app.pageInstance.init();\r\n}","'use strict';\r\n\r\napp.common.Accordion = class {\r\n  constructor(animationTime) {\r\n    this.animationTime = animationTime;\r\n    this.openedFrame = undefined;\r\n    this.lastClosedFrameParentId = undefined;\r\n  }\r\n\r\n  init() {\r\n    this.setEvents();\r\n  }\r\n  setEvents() {\r\n    $('.ac-q').on('click', this.accordionAnnimation.bind(this));\r\n    $(window).on('resize', this.refreshOpenedFrame.bind(this));\r\n  }\r\n  accordionAnnimation(e) {\r\n    $('.ac-q').off('click');\r\n\r\n    const parentId = $(e.target).parent().attr('id');\r\n\r\n    if (this.openedFrame) { this.closeAccordion(); }\r\n\r\n    if (parentId != this.lastClosedFrameParentId) {\r\n      this.openAccordion(e, parentId);\r\n      //app.common.scrolling.scrollTo(parentId, 200, this.animationTime);\r\n    }\r\n    this.lastClosedFrameParentId = undefined;\r\n\r\n    setTimeout(this.setEvents.bind(this), this.animationTime);\r\n  }\r\n  openAccordion(e, parentId) {\r\n    const askedFrame = $(`#${parentId} > .ac-a`);\r\n    const autoHeight = $(`#${parentId} > .ac-a`).css('height', 'auto').height();\r\n    askedFrame.css('height', '0');\r\n    askedFrame.animate({\r\n      height: autoHeight\r\n    }, this.animationTime);\r\n    this.openedFrame = askedFrame;\r\n  }\r\n  closeAccordion() {\r\n    this.openedFrame.animate({\r\n      height: 0\r\n    }, this.animationTime);\r\n    this.lastClosedFrameParentId = this.openedFrame.parent().attr('id');;\r\n    this.openedFrame = undefined;\r\n  }\r\n\r\n  refreshOpenedFrame() {\r\n\r\n    if (this.openedFrame) {\r\n      const autoHeight = this.openedFrame.css('height', 'auto').height();\r\n      this.openedFrame.animate({\r\n        height: autoHeight\r\n      }, 0);\r\n    }\r\n  }\r\n}","app.common.commonInit = () => {\r\n  app.common.scrolling.setSmoothScrolling();\r\n}","'use strict';\r\n\r\napp.common.FormManager = class {\r\n  constructor(formData, formId, url, callback) {\r\n    this.formData = formData;\r\n    this.formId = formId;\r\n    this.url = url;\r\n    this.callback = callback;\r\n\r\n    this.regex = {\r\n      name: /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,\r\n      // Support wide range of phone number format\r\n      phone: /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/,\r\n      mail: /^([a-z0-9\\+_\\-]+)(\\.[a-z0-9\\+_\\-]+)*@([a-z0-9\\-]+\\.)+[a-z]{2,6}$/\r\n    };\r\n    this.minNameLenth = 3;\r\n  }\r\n\r\n  formValidator() {\r\n    this.getFormData();\r\n\r\n    const hasError = this.checkFormData();\r\n    if (!hasError) {\r\n      this.sendData();\r\n    }\r\n  }\r\n  getFormData() {\r\n    const formData = $(this.formId).serializeArray();\r\n    const t = this;\r\n\r\n    // reset form data arrays\r\n    $.each(this.formData, (i, x) => {\r\n      if (typeof x.val === 'object') {\r\n        t.formData[i].val = [];\r\n      }\r\n    });\r\n\r\n    formData.forEach(x => {\r\n      // if values are store in object\r\n      if (typeof this.formData[x.name].val === 'object') {\r\n        this.formData[x.name].val.push(x.value);\r\n      }\r\n      else { this.formData[x.name].val = x.value; }\r\n    });\r\n  }\r\n\r\n  checkFormData() {\r\n    let errorChecker = false;\r\n\r\n    $.each(this.formData, (i, x) => {\r\n      // if no value set\r\n      if (x.val === \"\" || x.val.length === 0) {\r\n        errorChecker = true;\r\n\r\n        // if checkbox\r\n        if (x.type === 'checkbox') {\r\n          this.setError(i, 'click');\r\n        } else {\r\n          this.setError(i, 'keyup');\r\n        }\r\n      } else {\r\n        if (x.type === 'text') {\r\n          const test = this.regex[x.regex].test(x.val);\r\n\r\n          // if don't match regex or value too short\r\n          if (!test || x.val.length < this.minNameLenth) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    // refresh opened frame height if home page\r\n    if ($('body').attr('id') === 'Home') {\r\n      app.pageInstance.accordion.refreshOpenedFrame();\r\n    }\r\n\r\n    return errorChecker;\r\n  }\r\n\r\n  // check single data\r\n  checkInputData(e, messageIndex) {\r\n    const targetValue = $(e.target).val();\r\n    // if txt box message\r\n    if (e.type === 'keyup') {\r\n\r\n      const test = this.regex[this.formData[messageIndex].regex].test(targetValue);\r\n      // if match name regex and require length\r\n      if (test && targetValue.length >= this.minNameLenth) {\r\n        this.unsetError(messageIndex, 'keyup');\r\n      }\r\n\r\n    } else {\r\n      this.unsetError(messageIndex, 'click');\r\n    }\r\n  }\r\n\r\n  setError(messageIndex, type) {\r\n    // write message\r\n    $(`#${messageIndex}Container .error-message`).html(this.formData[messageIndex].errorMsg);\r\n    // set event to remove it\r\n    $(`input[name=${messageIndex}]`).on(type, e => {\r\n      this.checkInputData(e, messageIndex);\r\n    });\r\n  }\r\n  unsetError(messageIndex, type) {\r\n    // write empty message\r\n    $(`#${messageIndex}Container .error-message`).html('');\r\n    // refresh opened frame height\r\n    app.pageInstance.accordion.refreshOpenedFrame();\r\n    // unset event\r\n    $(`input[name=${messageIndex}]`).off(type);\r\n  }\r\n\r\n  sendData() {\r\n    const fd = new FormData();\r\n    const t = this;\r\n\r\n    $.each(this.formData, (i, x) => {\r\n      fd.append(i, x.val);\r\n    });\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      body: fd\r\n    }\r\n    const sendRes = fetch(this.url, options);\r\n    sendRes.then(res => res.text())\r\n      .then(data => {\r\n        console.log(data);\r\n        t.callback(data);\r\n      });\r\n  }\r\n\r\n}","'use strict';\r\n\r\napp.common.scrolling = {\r\n  // -----------------------------------------\r\n  setSmoothScrolling() {\r\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        document.querySelector(this.getAttribute('href')).scrollIntoView({\r\n          behavior: 'smooth'\r\n        });\r\n      });\r\n    });\r\n  },\r\n  // -----------------------------------------\r\n  scrollTo(elId, time, delay) {\r\n    setTimeout(() => {\r\n      $([document.documentElement, document.body]).animate({\r\n        scrollTop: $(`#${elId}`).offset().top\r\n      }, time);\r\n    }, delay);\r\n\r\n  }\r\n}","'use strict';\r\n\r\napp.pages.Home = class {\r\n  constructor() {\r\n    this.formData = {\r\n      Q1: { val: '', type: 'checkbox', errorMsg: 'Faites un choix' },\r\n      Q2: { val: '', type: 'checkbox', errorMsg: 'Faites un choix' },\r\n      Q3: { val: '', type: 'checkbox', errorMsg: 'Faites un choix' },\r\n      Q4: { val: [], type: 'checkbox', errorMsg: 'Faites un choix' },\r\n      LastName: { val: '', type: 'text', regex: 'name', errorMsg: 'Vous devez indiquer votre nom' },\r\n      FirstName: { val: '', type: 'text', regex: 'name', errorMsg: 'Vous devez indiquer votre prénom' },\r\n      Phone: { val: '', type: 'text', regex: 'phone', errorMsg: 'Vous devez indiquer votre numéro de téléphone' },\r\n      Mail: { val: '', type: 'text', regex: 'mail', errorMsg: 'Vous devez indiquer votre adresse mail' },\r\n      Acceptation: { val: '', type: 'checkbox', errorMsg: 'Acceptez les conditions générales d\\'utilisation' }\r\n    };\r\n    this.url = 'assets/phpParts/pages/home/home-form-request.php';\r\n  }\r\n  init() {\r\n    this.accordion = new app.common.Accordion(500);\r\n    this.formManager = new app.common.FormManager(\r\n      this.formData, '#HomeForm', this.url, this.mailCallback\r\n    );\r\n\r\n    this.accordion.init();\r\n    this.setEvents();\r\n  }\r\n\r\n  setEvents() {\r\n    const t = this;\r\n\r\n    $('#HomeSubmit').on('click', e => {\r\n      e.preventDefault();\r\n      t.formManager.formValidator();\r\n    });\r\n  }\r\n\r\n  mailCallback(data) {\r\n    if (data === 'mail sent') {\r\n      $('#ThirdSlideBox .section-contents').css('display', 'none');\r\n      $('#Home .home-section-3 .form-answer').css('display', 'block');\r\n      app.pageInstance.accordion.refreshOpenedFrame();\r\n    } else {\r\n      console.log('no mail sent');\r\n    }\r\n  }\r\n\r\n}"]}