{"version":3,"sources":["main.js","common/accordion.js","common/common-init.js","common/form-manager.js","common/scrolling.js","pages/home.js"],"names":["app","common","pages","init","pageId","$","attr","pageInstance","commonInit","Accordion","_class","animationTime","_classCallCheck","this","openedFrame","undefined","lastClosedFrameParentId","_createClass","key","value","setEvents","on","accordionAnnimation","bind","window","refreshOpenedFrame","e","off","parentId","target","parent","closeAccordion","openAccordion","setTimeout","askedFrame","concat","autoHeight","css","height","animate","scrolling","setSmoothScrolling","FormManager","_class2","FormData","errorMessages","formId","url","formData","regex","name","phone","mail","minNameLenth","getFormData","checkFormData","sendData","_this","serializeArray","Q4","forEach","x","push","_this2","errorChecker","each","i","length","setError","test","accordion","messageIndex","type","_this3","html","checkInputData","targetValue","val","unsetError","fd","append","options","method","body","fetch","then","res","text","data","console","log","document","querySelectorAll","anchor","addEventListener","preventDefault","querySelector","getAttribute","scrollIntoView","behavior","scrollTo","elId","time","delay","documentElement","scrollTop","offset","top","Home","_class3","Q1","Q2","Q3","LastName","FirstName","Phone","Mail","Acceptation","formManager","t","formValidator"],"mappings":"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","file":"../script.min.js","sourcesContent":["'use strict';\r\n\r\nconst app = app || {\r\n  common: {},\r\n  pages: {}\r\n};\r\n\r\n$(init);\r\n\r\nfunction init() {\r\n  const pageId = $('body').attr('id');\r\n  app.pageInstance = new app.pages[pageId]();\r\n\r\n  app.common.commonInit();\r\n  app.pageInstance.init();\r\n}","'use strict';\r\n\r\napp.common.Accordion = class {\r\n  constructor(animationTime) {\r\n    this.animationTime = animationTime;\r\n    this.openedFrame = undefined;\r\n    this.lastClosedFrameParentId = undefined;\r\n  }\r\n\r\n  init() {\r\n    this.setEvents();\r\n  }\r\n  setEvents() {\r\n    $('.ac-q').on('click', this.accordionAnnimation.bind(this));\r\n    $(window).on('resize', this.refreshOpenedFrame.bind(this));\r\n  }\r\n  accordionAnnimation(e) {\r\n    $('.ac-q').off('click');\r\n\r\n    const parentId = $(e.target).parent().attr('id');\r\n\r\n    if (this.openedFrame) { this.closeAccordion(); }\r\n\r\n    if (parentId != this.lastClosedFrameParentId) {\r\n      this.openAccordion(e, parentId);\r\n      //app.common.scrolling.scrollTo(parentId, 200, this.animationTime);\r\n    }\r\n    this.lastClosedFrameParentId = undefined;\r\n\r\n    setTimeout(this.setEvents.bind(this), this.animationTime);\r\n  }\r\n  openAccordion(e, parentId) {\r\n    const askedFrame = $(`#${parentId} > .ac-a`);\r\n    const autoHeight = $(`#${parentId} > .ac-a`).css('height', 'auto').height();\r\n    askedFrame.css('height', '0');\r\n    askedFrame.animate({\r\n      height: autoHeight\r\n    }, this.animationTime);\r\n    this.openedFrame = askedFrame;\r\n  }\r\n  closeAccordion() {\r\n    this.openedFrame.animate({\r\n      height: 0\r\n    }, this.animationTime);\r\n    this.lastClosedFrameParentId = this.openedFrame.parent().attr('id');;\r\n    this.openedFrame = undefined;\r\n  }\r\n\r\n  refreshOpenedFrame() {\r\n    const autoHeight = this.openedFrame.css('height', 'auto').height();\r\n    this.openedFrame.animate({\r\n      height: autoHeight\r\n    }, 0);\r\n  }\r\n}","app.common.commonInit = () => {\r\n  app.common.scrolling.setSmoothScrolling();\r\n}","'use strict';\r\n\r\napp.common.FormManager = class {\r\n  constructor(FormData, errorMessages, formId, url) {\r\n    this.formData = FormData;\r\n    this.errorMessages = errorMessages;\r\n    this.formId = formId;\r\n    this.url = url;\r\n\r\n    this.regex = {\r\n      name: /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,\r\n      // Support wide range of phone number format\r\n      phone: /((?:\\+|00)[17](?: |\\-)?|(?:\\+|00)[1-9]\\d{0,2}(?: |\\-)?|(?:\\+|00)1\\-\\d{3}(?: |\\-)?)?(0\\d|\\([0-9]{3}\\)|[1-9]{0,3})(?:((?: |\\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\\-)[0-9]{3}(?: |\\-)[0-9]{4})|([0-9]{7}))/,\r\n      mail: /^([a-z0-9\\+_\\-]+)(\\.[a-z0-9\\+_\\-]+)*@([a-z0-9\\-]+\\.)+[a-z]{2,6}$/\r\n    };\r\n    this.minNameLenth = 3;\r\n  }\r\n\r\n  formValidator() {\r\n    this.getFormData();\r\n\r\n    const hasError = this.checkFormData();\r\n    if (!hasError) {\r\n      this.sendData();\r\n    }\r\n  }\r\n  getFormData() {\r\n    const formData = $(this.formId).serializeArray();\r\n\r\n    // reset Q4 array\r\n    this.formData.Q4 = [];\r\n\r\n    formData.forEach(x => {\r\n      if (x.name === 'Q4') { this.formData[x.name].push(x.value); }\r\n      else { this.formData[x.name] = x.value; }\r\n    });\r\n  }\r\n  checkFormData() {\r\n    let errorChecker = false;\r\n\r\n    $.each(this.formData, (i, x) => {\r\n\r\n      // if no value set\r\n      if (x === \"\" || x.length === 0) {\r\n        errorChecker = true;\r\n\r\n        // if checkbox\r\n        if (i === 'Q1' || i === 'Q2' || i === 'Q3' || i === 'Q4' || i === 'Acceptation') {\r\n          this.setError(i, 'click');\r\n        } else {\r\n          this.setError(i, 'keyup');\r\n        }\r\n      } else {\r\n\r\n        // if name type\r\n        if (i === 'LastName' || i === 'FirstName') {\r\n          const test = this.regex.name.test(this.formData[i]);\r\n          // if don't match name regex or name too short\r\n          if (!test || this.formData[i].length < this.minNameLenth) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n        // if phone type\r\n        if (i === 'Phone') {\r\n          const test = this.regex.phone.test(this.formData[i]);\r\n          // if don't match phone regex\r\n          if (!test) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n        // if mail type\r\n        if (i === 'Mail') {\r\n          const test = this.regex.mail.test(this.formData[i]);\r\n          // if don't match mail regex\r\n          if (!test) {\r\n            this.setError(i, 'keyup');\r\n            errorChecker = true;\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    // refresh opened frame height\r\n    app.pageInstance.accordion.refreshOpenedFrame();\r\n\r\n    return errorChecker;\r\n  }\r\n\r\n  setError(messageIndex, type) {\r\n    // write message\r\n    $(`#${messageIndex}Container .error-message`).html(this.errorMessages[messageIndex]);\r\n    // set event to remove it\r\n    $(`input[name=${messageIndex}]`).on(type, e => {\r\n      this.checkInputData(e, messageIndex);\r\n    });\r\n  }\r\n\r\n  unsetError(messageIndex, type) {\r\n    // write empty message\r\n    $(`#${messageIndex}Container .error-message`).html('');\r\n    // refresh opened frame height\r\n    app.pageInstance.accordion.refreshOpenedFrame();\r\n    // unset event\r\n    $(`input[name=${messageIndex}]`).off(type);\r\n  }\r\n\r\n  checkInputData(e, messageIndex) {\r\n    const targetValue = $(e.target).val();\r\n    // if txt box message\r\n    if (e.type === 'keyup') {\r\n\r\n      // if name type message\r\n      if (messageIndex === 'LastName' || messageIndex === 'FirstName') {\r\n        const test = this.regex.name.test(targetValue);\r\n        // if match name regex and require length\r\n        if (test && targetValue.length >= this.minNameLenth) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n      // if phone type message\r\n      if (messageIndex === 'Phone') {\r\n        const test = this.regex.phone.test(targetValue);\r\n        // if match phone regex\r\n        if (test) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n      // if mail type message\r\n      if (messageIndex === 'Mail') {\r\n        const test = this.regex.mail.test(targetValue);\r\n        // if match mail regex\r\n        if (test) {\r\n          this.unsetError(messageIndex, 'keyup');\r\n        }\r\n      }\r\n\r\n    } else {\r\n      this.unsetError(messageIndex, 'click');\r\n    }\r\n  }\r\n\r\n  sendData() {\r\n    const fd = new FormData();\r\n\r\n    $.each(this.formData, (i, x) => {\r\n      fd.append(i, x);\r\n    });\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      body: fd\r\n    }\r\n    const sendRes = fetch(this.url, options);\r\n    sendRes.then(res => res.text())\r\n      .then(data => {\r\n        console.log(data);\r\n        if (data === 'mail sent') {\r\n          $('#Home .home-section-3 .form-answer').css('display', 'block');\r\n        } else {\r\n          console.log('no mail sent')\r\n        }\r\n      });\r\n  }\r\n\r\n}","'use strict';\r\n\r\napp.common.scrolling = {\r\n  // -----------------------------------------\r\n  setSmoothScrolling() {\r\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n      anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        document.querySelector(this.getAttribute('href')).scrollIntoView({\r\n          behavior: 'smooth'\r\n        });\r\n      });\r\n    });\r\n  },\r\n  // -----------------------------------------\r\n  scrollTo(elId, time, delay) {\r\n    setTimeout(() => {\r\n      $([document.documentElement, document.body]).animate({\r\n        scrollTop: $(`#${elId}`).offset().top\r\n      }, time);\r\n    }, delay);\r\n\r\n  }\r\n}","'use strict';\r\n\r\napp.pages.Home = class {\r\n  constructor() {\r\n    this.formData = {\r\n      Q1: '',\r\n      Q2: '',\r\n      Q3: '',\r\n      Q4: [],\r\n      LastName: '',\r\n      FirstName: '',\r\n      Phone: '',\r\n      Mail: '',\r\n      Acceptation: ''\r\n    };\r\n    this.errorMessages = {\r\n      Q1: 'Faites un choix',\r\n      Q2: 'Faites un choix',\r\n      Q3: 'Faites un choix',\r\n      Q4: 'Faites un choix',\r\n      LastName: 'Vous devez indiquer votre nom',\r\n      FirstName: 'Vous devez indiquer votre prénom',\r\n      Phone: 'Vous devez indiquer votre numéro de téléphone',\r\n      Mail: 'Vous devez indiquer votre adresse mail',\r\n      Acceptation: 'Acceptez les conditions générales d\\'utilisation'\r\n    };\r\n    this.url = 'assets/phpParts/pages/home/home-form-request.php';\r\n  }\r\n  init() {\r\n    this.accordion = new app.common.Accordion(500);\r\n    this.formManager = new app.common.FormManager(this.formData, this.errorMessages, '#HomeForm', this.url);\r\n\r\n    this.accordion.init();\r\n    this.setEvents();\r\n  }\r\n\r\n  setEvents() {\r\n    const t = this;\r\n\r\n    $('#HomeSubmit').on('click', e => {\r\n      e.preventDefault();\r\n      t.formManager.formValidator();\r\n    });\r\n  }\r\n\r\n}"]}