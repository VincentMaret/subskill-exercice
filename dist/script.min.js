"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var app=app||{common:{},pages:{}};function init(){var e=$("body").attr("id");app.pageInstance=new app.pages[e],app.common.commonInit(),app.pageInstance.init()}$(init),app.common.Accordion=function(){function t(e){_classCallCheck(this,t),this.animationTime=e,this.openedFrame=void 0,this.lastClosedFrameParentId=void 0}return _createClass(t,[{key:"init",value:function(){this.setEvents()}},{key:"setEvents",value:function(){$(".ac-q").on("click",this.accordionAnnimation.bind(this)),$(window).on("resize",this.refreshOpenedFrame.bind(this))}},{key:"accordionAnnimation",value:function(e){$(".ac-q").off("click");var t=$(e.target).parent().attr("id");this.openedFrame&&this.closeAccordion(),t!=this.lastClosedFrameParentId&&this.openAccordion(e,t),this.lastClosedFrameParentId=void 0,setTimeout(this.setEvents.bind(this),this.animationTime)}},{key:"openAccordion",value:function(e,t){var o=$("#".concat(t," > .ac-a")),a=$("#".concat(t," > .ac-a")).css("height","auto").height();o.css("height","0"),o.animate({height:a},this.animationTime),this.openedFrame=o}},{key:"closeAccordion",value:function(){this.openedFrame.animate({height:0},this.animationTime),this.lastClosedFrameParentId=this.openedFrame.parent().attr("id"),this.openedFrame=void 0}},{key:"refreshOpenedFrame",value:function(){if(this.openedFrame){var e=this.openedFrame.css("height","auto").height();this.openedFrame.animate({height:e},0)}}}]),t}(),app.common.commonInit=function(){app.common.scrolling.setSmoothScrolling()},app.common.FormManager=function(){function n(e,t,o,a){_classCallCheck(this,n),this.formData=e,this.formId=t,this.url=o,this.callback=a,this.regex={name:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,phone:/((?:\+|00)[17](?: |\-)?|(?:\+|00)[1-9]\d{0,2}(?: |\-)?|(?:\+|00)1\-\d{3}(?: |\-)?)?(0\d|\([0-9]{3}\)|[1-9]{0,3})(?:((?: |\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\-)[0-9]{3}(?: |\-)[0-9]{4})|([0-9]{7}))/,mail:/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/},this.minNameLenth=3}return _createClass(n,[{key:"formValidator",value:function(){this.getFormData(),this.checkFormData()||this.sendData()}},{key:"getFormData",value:function(){var t=this,e=$(this.formId).serializeArray(),o=this;$.each(this.formData,function(e,t){"object"===_typeof(t.val)&&(o.formData[e].val=[])}),e.forEach(function(e){"object"===_typeof(t.formData[e.name].val)?t.formData[e.name].val.push(e.value):t.formData[e.name].val=e.value})}},{key:"checkFormData",value:function(){var o=this,a=!1;return $.each(this.formData,function(e,t){""===t.val||0===t.val.length?(a=!0,"checkbox"===t.type?o.setError(e,"click"):o.setError(e,"keyup")):"text"===t.type&&(!o.regex[t.regex].test(t.val)||t.val.length<o.minNameLenth)&&(o.setError(e,"keyup"),a=!0)}),"Home"===$("body").attr("id")&&app.pageInstance.accordion.refreshOpenedFrame(),a}},{key:"checkInputData",value:function(e,t){var o=$(e.target).val();"keyup"===e.type?this.regex[this.formData[t].regex].test(o)&&o.length>=this.minNameLenth&&this.unsetError(t,"keyup"):this.unsetError(t,"click")}},{key:"setError",value:function(t,e){var o=this;$("#".concat(t,"Container .error-message")).html(this.formData[t].errorMsg),$("input[name=".concat(t,"]")).on(e,function(e){o.checkInputData(e,t)})}},{key:"unsetError",value:function(e,t){$("#".concat(e,"Container .error-message")).html(""),app.pageInstance.accordion.refreshOpenedFrame(),$("input[name=".concat(e,"]")).off(t)}},{key:"sendData",value:function(){var o=new FormData,t=this;$.each(this.formData,function(e,t){o.append(e,t.val)});var e={method:"POST",body:o};fetch(this.url,e).then(function(e){return e.text()}).then(function(e){console.log(e),t.callback(e)})}}]),n}(),app.common.scrolling={setSmoothScrolling:function(){document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})})},scrollTo:function(e,t,o){setTimeout(function(){$([document.documentElement,document.body]).animate({scrollTop:$("#".concat(e)).offset().top},t)},o)}},app.pages.Home=function(){function e(){_classCallCheck(this,e),this.formData={Q1:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q2:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q3:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q4:{val:[],type:"checkbox",errorMsg:"Faites un choix"},LastName:{val:"",type:"text",regex:"name",errorMsg:"Vous devez indiquer votre nom"},FirstName:{val:"",type:"text",regex:"name",errorMsg:"Vous devez indiquer votre prénom"},Phone:{val:"",type:"text",regex:"phone",errorMsg:"Vous devez indiquer votre numéro de téléphone"},Mail:{val:"",type:"text",regex:"mail",errorMsg:"Vous devez indiquer votre adresse mail"},Acceptation:{val:"",type:"checkbox",errorMsg:"Acceptez les conditions générales d'utilisation"}},this.url="assets/phpParts/pages/home/home-form-request.php"}return _createClass(e,[{key:"init",value:function(){this.accordion=new app.common.Accordion(500),this.formManager=new app.common.FormManager(this.formData,"#HomeForm",this.url,this.mailCallback),this.accordion.init(),this.setEvents()}},{key:"setEvents",value:function(){var t=this;$("#HomeSubmit").on("click",function(e){e.preventDefault(),t.formManager.formValidator()})}},{key:"mailCallback",value:function(e){"mail sent"===e?($("#ThirdSlideBox .section-contents").css("display","none"),$("#Home .home-section-3 .form-answer").css("display","block"),app.pageInstance.accordion.refreshOpenedFrame()):console.log("no mail sent")}}]),e}();
//# sourceMappingURL=maps/script.min.js.map
