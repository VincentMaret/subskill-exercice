"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var app=app||{common:{},pages:{}};function init(){var e=$("body").attr("id");app.pageInstance=new app.pages[e],app.common.commonInit(),app.pageInstance.init()}$(init),app.common.Accordion=function(){function t(e){_classCallCheck(this,t),this.animationTime=e,this.openedFrame=void 0,this.lastClosedFrameParentId=void 0,this.isAnimated=!1}return _createClass(t,[{key:"init",value:function(){this.setEvents()}},{key:"setEvents",value:function(){$(".ac-q").on("click",this.accordionAnnimation.bind(this)),$(window).on("resize",this.refreshOpenedFrame.bind(this))}},{key:"accordionAnnimation",value:function(e){if(!this.isAnimated){this.isAnimated=!0;var t=$(e.target).parent().attr("id");this.openedFrame&&this.closeAccordion(),t!=this.lastClosedFrameParentId&&this.openAccordion(e,t),this.lastClosedFrameParentId=void 0}}},{key:"openAccordion",value:function(e,t){var a=this,o=$("#".concat(t," > .ac-a")),n=$("#".concat(t," > .ac-a")).css("height","auto").height();o.css("height","0"),o.animate({height:n},this.animationTime,function(){a.isAnimated=!1}),this.openedFrame=o}},{key:"closeAccordion",value:function(){var e=this;this.openedFrame.animate({height:0},this.animationTime,function(){e.isAnimated=!1}),this.lastClosedFrameParentId=this.openedFrame.parent().attr("id"),this.openedFrame=void 0}},{key:"refreshOpenedFrame",value:function(){if(this.openedFrame){var e=this.openedFrame.css("height","auto").height();this.openedFrame.animate({height:e},0)}}}]),t}(),app.common.commonInit=function(){app.common.scrolling.setSmoothScrolling()};var REGEX={name:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/,phone:/((?:\+|00)[17](?: |\-)?|(?:\+|00)[1-9]\d{0,2}(?: |\-)?|(?:\+|00)1\-\d{3}(?: |\-)?)?(0\d|\([0-9]{3}\)|[1-9]{0,3})(?:((?: |\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\-)[0-9]{3}(?: |\-)[0-9]{4})|([0-9]{7}))/,mail:/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/},MIN_LENGTH=3;app.common.FormManager=function(){function n(e,t,a,o){_classCallCheck(this,n),this.formData=e,this.formId=t,this.url=a,this.errorCallback=o}return _createClass(n,[{key:"validateFormAndSendMail",value:function(e){this.getFormData(),this.checkFormData()||this.sendData(e)}},{key:"getFormData",value:function(){var t=this,e=$(this.formId).serializeArray(),a=this;$.each(this.formData,function(e,t){"object"===_typeof(t.val)&&(a.formData[e].val=[])}),e.forEach(function(e){"object"===_typeof(t.formData[e.name].val)?t.formData[e.name].val.push(e.value):t.formData[e.name].val=e.value})}},{key:"checkFormData",value:function(){var a=this,o=!1;return $.each(this.formData,function(e,t){""===t.val||0===t.val.length?(o=!0,"checkbox"===t.type?a.setError(e,"click"):a.setError(e,"keyup")):"text"===t.type&&(!REGEX[t.regex].test(t.val)||t.val.length<MIN_LENGTH)&&(a.setError(e,"keyup"),o=!0)}),this.errorCallback&&this.errorCallback(),o}},{key:"checkInputData",value:function(e,t){var a=$(e.target).val();"keyup"===e.type?REGEX[this.formData[t].regex].test(a)&&a.length>=MIN_LENGTH&&this.unsetError(t,"keyup"):this.unsetError(t,"click")}},{key:"setError",value:function(t,e){var a=this;$("#".concat(t,"Container .error-message")).html(this.formData[t].errorMsg),$("input[name=".concat(t,"]")).on(e,function(e){a.checkInputData(e,t)})}},{key:"unsetError",value:function(e,t){$("#".concat(e,"Container .error-message")).html(""),this.errorCallback&&this.errorCallback(),$("input[name=".concat(e,"]")).off(t)}},{key:"sendData",value:function(t){var a=new FormData;$.each(this.formData,function(e,t){a.append(e,t.val)});var e={method:"POST",body:a};fetch(this.url,e).then(function(e){return e.text()}).then(function(e){console.log(e),t(e)})}}]),n}(),app.common.scrolling={setSmoothScrolling:function(){document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})})},scrollTo:function(e,t,a){setTimeout(function(){$([document.documentElement,document.body]).animate({scrollTop:$("#".concat(e)).offset().top},t)},a)}},app.pages.Home=function(){function e(){_classCallCheck(this,e),this.formData={Q1:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q2:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q3:{val:"",type:"checkbox",errorMsg:"Faites un choix"},Q4:{val:[],type:"checkbox",errorMsg:"Faites un choix"},LastName:{val:"",type:"text",regex:"name",errorMsg:"Vous devez indiquer votre nom"},FirstName:{val:"",type:"text",regex:"name",errorMsg:"Vous devez indiquer votre prénom"},Phone:{val:"",type:"text",regex:"phone",errorMsg:"Vous devez indiquer votre numéro de téléphone"},Mail:{val:"",type:"text",regex:"mail",errorMsg:"Vous devez indiquer votre adresse mail"},Acceptation:{val:"",type:"checkbox",errorMsg:"Acceptez les conditions générales d'utilisation"}},this.url="assets/phpParts/pages/home/home-form-request.php"}return _createClass(e,[{key:"init",value:function(){this.accordion=new app.common.Accordion(500),this.formManager=new app.common.FormManager(this.formData,"#HomeForm",this.url,this.errorCallback),this.accordion.init(),this.setEvents()}},{key:"setEvents",value:function(){var t=this,a=this;$("#HomeSubmit").on("click",function(e){e.preventDefault(),a.formManager.validateFormAndSendMail(t.mailCallback)})}},{key:"mailCallback",value:function(e){"mail sent"===e?($("#ThirdSlideBox .section-contents").css("display","none"),$("#Home .home-section-3 .form-answer").css("display","block"),app.pageInstance.accordion.refreshOpenedFrame()):console.log("no mail sent")}},{key:"errorCallback",value:function(){app.pageInstance.accordion.refreshOpenedFrame()}}]),e}();
//# sourceMappingURL=maps/script.min.js.map
